(function(e){e.fn.superfish=function(t){var n=e.fn.superfish,r=n.c,i=e('<span class="'+r.arrowClass+'"> &#187;</span>'),s=function(){var t=e(this),n=f(t);clearTimeout(n.sfTimer);t.showSuperfishUl().siblings().hideSuperfishUl()},o=function(t){var r=e(this),i=f(r);if(t.type==="click"||n.ios){e.proxy(u,r,i)()}else{clearTimeout(i.sfTimer);i.sfTimer=setTimeout(e.proxy(u,r,i),i.delay)}},u=function(t){t.retainPath=e.inArray(this[0],t.$path)>-1;this.hideSuperfishUl();if(!this.parents("."+t.hoverClass).length){t.onIdle.call(a(this));if(t.$path.length){e.proxy(s,t.$path)()}}},a=function(e){return e.closest("."+r.menuClass)},f=function(e){return a(e).data("sf-options")},l=function(e){e.css("ms-touch-action","none")},c=function(t,r){var i="li:has(ul)";if(!r.useClick){if(e.fn.hoverIntent&&!r.disableHI){t.hoverIntent(s,o,i)}else{t.on("mouseenter",i,s).on("mouseleave",i,o)}}var u="MSPointerDown";if(!n.ios){u+=" touchstart"}if(n.wp7){u+=" mousedown"}t.on("focusin","li",s).on("focusout","li",o).on("click","a",r,p).on(u,"a",h)},h=function(t){var n=e(this),r=n.siblings("ul");if(r.length>0&&r.is(":hidden")){n.data("follow",false);if(t.type==="MSPointerDown"){n.trigger("focus");return false}}},p=function(t){var n=e(this),r=t.data,i=n.siblings("ul"),u=n.data("follow")===false?false:true;if(i.length&&(r.useClick||!u)){t.preventDefault();if(i.is(":hidden")){e.proxy(s,n.parent("li"))()}else if(r.useClick&&u){e.proxy(o,n.parent("li"),t)()}}},d=function(t,n){return t.find("li."+n.pathClass).slice(0,n.pathLevels).addClass(n.hoverClass+" "+r.bcClass).filter(function(){return e(this).children("ul").hide().show().length}).removeClass(n.pathClass)},v=function(t,n){if(n.autoArrows){t.children("a").each(function(){m(e(this))})}},m=function(e){e.addClass(r.anchorClass).append(i.clone())};n.getOptions=f;return this.addClass(r.menuClass).each(function(){var i=e(this),s=e.extend({},n.defaults,t),o=i.find("li:has(ul)");s.$path=d(i,s);i.data("sf-options",s);v(o,s);l(i);c(i,s);o.not("."+r.bcClass).hideSuperfishUl(true);s.onInit.call(this)})};var t=e.fn.superfish;t.o=[];t.op={};t.c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",arrowClass:"sf-sub-indicator"};t.defaults={hoverClass:"sfHover",pathClass:"overrideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},animationOut:{opacity:"hide"},speed:"normal",speedOut:"fast",autoArrows:true,disableHI:false,useClick:false,onInit:e.noop,onBeforeShow:e.noop,onShow:e.noop,onBeforeHide:e.noop,onHide:e.noop,onIdle:e.noop};t.ios=/iPhone|iPad|iPod/i.test(navigator.userAgent);t.wp7=function(){var e=document.documentElement.style;return"behavior"in e&&"fill"in e&&/iemobile/i.test(navigator.userAgent)}();e.fn.extend({hideSuperfishUl:function(n){if(this.length){var r=this,i=t.getOptions(r),s=i.retainPath===true?i.$path:"",o=r.find("li."+i.hoverClass).add(this).not(s).removeClass(i.hoverClass).children("ul"),u=i.speedOut;if(n){o.show();u=0}i.retainPath=false;i.onBeforeHide.call(o);o.stop(true,true).animate(i.animationOut,u,function(){var t=e(this);i.onHide.call(t);if(i.useClick){t.siblings("a").data("follow",false)}})}return this},showSuperfishUl:function(){var e=t.getOptions(this),n=this.addClass(e.hoverClass),r=n.children("ul");e.onBeforeShow.call(r);r.stop(true,true).animate(e.animation,e.speed,function(){e.onShow.call(r);n.children("a").data("follow",true)});return this}});if(t.ios){e(window).load(function(){e("body").children().on("click",e.noop)})}})(jQuery)